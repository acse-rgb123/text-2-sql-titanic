import openai

def interpret_results(results, user_query):
    """Interpret the results of the SQL query and provide a summary."""
    if results is None or results.empty:
        return "No results to interpret."

    # Convert the result DataFrame to a string
    results_str = results.to_string(index=False)
    
    # Create a prompt for GPT-4 to interpret the SQL query result
    input_text = (
        f"Given the following SQL query result:\n{results_str}\n"
        f"Based on this data, answer the original user question: '{user_query}'. "
        f"Provide a concise and numerical answer to the user question but do add a few words to contextualise it."
    )

    # Send the prompt to OpenAI API
    response = openai.ChatCompletion.create(
        model="gpt-4",
        messages=[
            {"role": "system", "content": "You are an expert in interpreting SQL query results."},
            {"role": "user", "content": input_text}
        ],
        max_tokens=300,
        temperature=0.5,
    )

    # Return the response generated by GPT-4
    return response['choices'][0]['message']['content'].strip()
